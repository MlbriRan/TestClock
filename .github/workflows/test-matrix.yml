name: Test matrix

on: 
  push:
    paths-ignore:
      - 'docs/**'

jobs:
  test_matrix:
    name: Test matrix job

    strategy:
      matrix:
        os: [ubuntu-latest, windows-latest, macOS-latest]
        node-version: [10]
        dart-version: [stable, dev]
        code-version: [stable, insiders]
    runs-on: ${{ matrix.os }}

    env:
      DART_VER: ${{ matrix.dart-version }}
      CODE_VER: ${{ matrix.code-version }}
    if: (github.ref == 'master' && DART_VER == 'dev' && CODE_VER == 'insiders') || (github.ref != 'master' && DART_VER != 'dev' && CODE_VER != 'insiders')

    steps:
      - name: Checkout
        uses: actions/checkout@v1
